<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ GoHighLevel Footer Test - AI PRL Assist</title>
    <style>
        :root {
            --primary-orange: #E67E22;
            --primary-blue: #3498DB;
            --dark-gray: #2C3E50;
            --white: #FFFFFF;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark-gray);
            line-height: 1.6;
            min-height: 100vh;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-orange) 0%, var(--primary-blue) 100%);
            color: var(--white);
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .test-card {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            border: 1px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(10px);
        }

        .test-card h2 {
            color: var(--primary-orange);
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .btn {
            background: linear-gradient(135deg, var(--primary-orange) 0%, var(--primary-blue) 100%);
            color: var(--white);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(230, 126, 34, 0.3);
        }

        .status {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin: 1rem 0;
        }

        .code-block {
            background: var(--dark-gray);
            color: #00ff00;
            padding: 1.5rem;
            border-radius: 12px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            margin: 1rem 0;
            border: 2px solid var(--primary-blue);
        }

        .success { background: #d4edda; color: #155724; padding: 1rem; border-radius: 8px; margin: 1rem 0; }
        .warning { background: #fff3cd; color: #856404; padding: 1rem; border-radius: 8px; margin: 1rem 0; }
        .error { background: #f8d7da; color: #721c24; padding: 1rem; border-radius: 8px; margin: 1rem 0; }

        .feature-badge {
            background: var(--primary-blue);
            color: var(--white);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-left: 1rem;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>ü§ñ AI PRL Assist</h1>
            <p>GoHighLevel Footer Code Test - Retail's Customer Experience Platform</p>
            <span class="feature-badge">Live Test</span>
        </div>
    </div>

    <div class="container">
        <div class="test-card">
            <h2>üöÄ GoHighLevel Footer Code Test</h2>
            <p>This page simulates exactly what happens when you paste the widget code in GoHighLevel's Footer Tracking Code section.</p>
            
            <div class="success">
                <strong>‚úÖ VERIFIED METHOD (Sept 2025):</strong><br>
                Sites ‚Üí Site Builder ‚Üí Settings ‚Üí Tracking Code ‚Üí Footer Code
            </div>

            <div class="code-block">
&lt;!-- AI PRL Assist Chat Widget - GoHighLevel Footer Code --&gt;
&lt;script&gt;
  window.ChatWidget = {
    siteId: "ghl-test-001",
    configUrl: "https://dynamiccode-ochre.vercel.app/configs/{{siteId}}.json"
  };
&lt;/script&gt;
&lt;script async src="https://dynamiccode-ochre.vercel.app/chat-widget.js"&gt;&lt;/script&gt;
            </div>

            <div class="warning">
                <strong>‚è∞ WIDGET STATUS:</strong> Should appear in 3-5 seconds after page load
            </div>

            <button class="btn" onclick="testWidget()">üß™ Test Widget Now</button>
            <button class="btn" onclick="forceOpen()">üöÄ Force Open Chat</button>
            <button class="btn" onclick="showStatus()">üìä Show Status</button>
            <button class="btn" onclick="copyCode()">üìã Copy Code</button>
        </div>

        <div class="test-card">
            <h2>üìä Real-Time Widget Status</h2>
            <div id="statusDisplay" class="status">
                Initializing tests...
            </div>
        </div>

        <div class="test-card">
            <h2>üé® AI PRL Assist Branding Features</h2>
            <ul>
                <li><strong>Colors:</strong> Orange (#E67E22) + Blue (#3498DB) gradient</li>
                <li><strong>Typography:</strong> Inter font for modern, professional look</li>
                <li><strong>Animations:</strong> Smooth hover effects and transitions</li>
                <li><strong>Responsive:</strong> Desktop windowed, mobile full-screen</li>
                <li><strong>Shadow DOM:</strong> No conflicts with client sites</li>
            </ul>
        </div>

        <div class="test-card">
            <h2>üîß Remote Configuration Test</h2>
            <p>The widget is configured via: <code>/configs/ghl-test-001.json</code></p>
            <p><strong>You can change EVERYTHING remotely:</strong></p>
            <ul>
                <li>Colors, size, position</li>
                <li>Chat URLs (primary + fallback)</li>
                <li>Triggers and timing</li>
                <li>Page rules and targeting</li>
                <li>Analytics and tracking</li>
            </ul>
        </div>
    </div>

    <script>
        // GoHighLevel Footer Code Simulation
        window.ChatWidget = {
            siteId: "ghl-test-001",
            configUrl: "https://dynamiccode-ochre.vercel.app/configs/{{siteId}}.json"
        };

        function testWidget() {
            updateStatus('üß™ Testing widget functionality...');
            
            setTimeout(() => {
                const shadowHost = document.getElementById('cw_v1-host');
                const bubble = shadowHost?.shadowRoot?.querySelector('.cw-bubble');
                
                if (bubble) {
                    updateStatus('‚úÖ SUCCESS: Widget loaded and bubble visible!', 'success');
                } else {
                    updateStatus('‚è≥ LOADING: Widget still initializing...', 'warning');
                }
            }, 2000);
        }

        function forceOpen() {
            if (window.ChatWidget && window.ChatWidget.open) {
                updateStatus('üöÄ Forcing chat to open...', 'success');
                window.ChatWidget.open();
            } else {
                updateStatus('‚ùå ERROR: Widget API not ready yet', 'error');
            }
        }

        function showStatus() {
            const status = {
                loaded: !!window.__chatWidgetLoaded,
                api: !!window.ChatWidget?.open,
                shadowHost: !!document.getElementById('cw_v1-host'),
                config: !!window.ChatWidget?.siteId
            };
            
            updateStatus(`üìä Widget Status: ${JSON.stringify(status, null, 2)}`, 'success');
            console.log('üìä Detailed Status:', status);
        }

        function copyCode() {
            const code = `<!-- AI PRL Assist Chat Widget - GoHighLevel Footer Code -->
<script>
  window.ChatWidget = {
    siteId: "ghl-test-001",
    configUrl: "https://dynamiccode-ochre.vercel.app/configs/{{siteId}}.json"
  };
</script>
<script async src="https://dynamiccode-ochre.vercel.app/chat-widget.js"></script>`;
            
            navigator.clipboard.writeText(code).then(() => {
                updateStatus('üìã Code copied to clipboard! Paste this in GoHighLevel Footer Code.', 'success');
            });
        }

        function updateStatus(message, type = 'info') {
            const statusDiv = document.getElementById('statusDisplay');
            const timestamp = new Date().toLocaleTimeString();
            
            statusDiv.innerHTML = `[${timestamp}] ${message}`;
            statusDiv.className = `status ${type}`;
        }

        // Auto-status updates
        window.addEventListener('load', () => {
            updateStatus('‚úÖ Page loaded, widget should initialize...', 'success');
            
            // Check widget status every 2 seconds for first 10 seconds
            let checks = 0;
            const checkInterval = setInterval(() => {
                checks++;
                const shadowHost = document.getElementById('cw_v1-host');
                
                if (shadowHost) {
                    updateStatus('üéâ SUCCESS: Widget loaded! You can now test all features.', 'success');
                    clearInterval(checkInterval);
                } else if (checks >= 5) {
                    updateStatus('‚ö†Ô∏è Widget taking longer than expected. Check console for errors.', 'warning');
                    clearInterval(checkInterval);
                }
            }, 2000);
        });
    </script>

    <!-- AI PRL Assist Chat Widget - This is what goes in GoHighLevel Footer Code -->
    <script async src="https://dynamiccode-ochre.vercel.app/chat-widget.js"></script>
</body>
</html>
